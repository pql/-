# ä»€ä¹ˆæ˜¯vueï¼Ÿ
Vue (è¯»éŸ³ /vjuË/ï¼Œç±»ä¼¼äº view) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚
ç‰¹ç‚¹ï¼šæ˜“ç”¨ï¼Œçµæ´»ï¼Œé«˜æ•ˆ æ¸è¿›å¼æ¡†æ¶

é€ä¸€é€’å¢ vue + components + vue-router + vuex + vue-cli

ä»€ä¹ˆæ˜¯åº“ï¼Œä»€ä¹ˆæ˜¯æ¡†æ¶ï¼Ÿ
- åº“æ˜¯å°†ä»£ç é›†åˆæˆä¸€ä¸ªäº§å“ï¼Œåº“æ˜¯æˆ‘ä»¬è°ƒç”¨åº“ä¸­çš„æ–¹æ³•å®ç°è‡ªå·±çš„åŠŸèƒ½ã€‚
- æ¡†æ¶åˆ™æ˜¯ä¸ºè§£å†³ä¸€ç±»é—®é¢˜è€Œå¼€å‘çš„äº§å“ï¼Œæ¡†æ¶æ˜¯æˆ‘ä»¬åœ¨æŒ‡å®šçš„ä½ç½®ç¼–å†™å¥½ä»£ç ï¼Œæ¡†æ¶å¸®æˆ‘ä»¬è°ƒç”¨ã€‚

æ¡†æ¶æ˜¯åº“çš„å‡çº§ç‰ˆ

# åˆå§‹ä½¿ç”¨
```js
new Vue({
    el: '#app',
    template: '<div>hello world</div>',
    data: {}
});
```
# mvc && mvvm
åœ¨ä¼ ç»Ÿçš„mvcä¸­é™¤äº†modelå’Œviewä»¥å¤–çš„é€»è¾‘éƒ½æ”¾åœ¨äº†controllerä¸­ï¼Œå¯¼è‡´controlleré€»è¾‘å¤æ‚éš¾ä»¥ç»´æŠ¤ï¼Œåœ¨mvvmä¸­viewå’Œmodelæ²¡æœ‰ç›´æ¥çš„å…³ç³»ï¼Œå…¨éƒ¨é€šè¿‡viewModelè¿›è¡Œäº¤äº’

# å£°æ˜å¼å’Œå‘½ä»¤å¼
- è‡ªå·±å†™forå¾ªç¯å°±æ˜¯å‘½ä»¤å¼ï¼ˆå‘½ä»¤å…¶æŒ‰ç…§è‡ªå·±çš„æ–¹å¼å¾—åˆ°ç»“æœï¼‰
- å£°æ˜å¼å°±æ˜¯åˆ©ç”¨æ•°ç»„çš„æ–¹æ³•forEachï¼ˆæˆ‘ä»¬æƒ³è¦çš„æ˜¯å¾ªç¯ï¼Œå†…éƒ¨å¸®æˆ‘ä»¬å»åšï¼‰

# æ¨¡æ¿è¯­æ³• mustache
å…è®¸å¼€å‘è€…å£°æ˜å¼åœ°å°†DOMç»‘å®šè‡³åº•å±‚Vueå®ä¾‹çš„æ•°æ®ã€‚åœ¨ä½¿ç”¨æ•°æ®å‰éœ€è¦å…ˆå£°æ˜
- ç¼–å†™ä¸‰å…ƒè¡¨è¾¾å¼
- è·å–è¿”å›å€¼
- JavaScriptè¡¨è¾¾å¼
```js
<div id="app">
    {{ 1+ 1 }}
    {{ msg == 'hello' ? 'yes': 'no' }}
    {{ {name:1} }}
</div>
<script src="./node_modules/vue/dist/vue.js"></script>
<script>
    let vm = new Vue({
        el: '#app',
        data: {
            msg: 'hello'
        }
    })
</script>
```
# è§‚å¯Ÿæ•°æ®å˜åŒ–
```js
function notify() {
    console.log('è§†å›¾æ›´æ–°');
}
let data = {
    name: 'jw',
    age: 18,
    arr: []
}
// é‡å†™æ•°ç»„çš„æ–¹æ³•
let oldProtoMethods = Array.prototype;
let proto = Object.create(oldProtoMethods);
['push', 'pop', 'shift', 'unshift'].forEach(method => {
    proto[method] = function() {
        notify();
        oldProtoMethods[method].call(this, ...arguments);
    }
})
function observer(obj) {
    if(Array.isArray(obj)) {
        obj.__proto__ = proto;
        return;
    }
    if(typeof obj === 'object') {
        for(let key in obj) {
            defineReactive(obj, key, obj[key]);
        }
    }
}
function defineReactive(obj, key, value) {
    observer(value); // å†ä¸€æ¬¡å¾ªç¯ value
    Object.defineProperty(obj, key, {
        get() {
            return value;
        },
        set(val) {
            notify();
            observer(val);
            value = val;
        }
    });
}
observer(data);
data.arr.push(1);
```
# ä½¿ç”¨proxyå®ç°å“åº”å¼å˜åŒ–
```js
let obj = {
    name: {name: 'jw'},
    arr: ['åƒ', 'å–', 'ç©']
}
let handler = {
    get(target, key, receiver) {
        if(typeof target[key] === 'object' && target[key] !== null) {
            return new Proxy(target[key], handler);
        }
        return Reflect.get(target, key, receiver);
    },
    set(target, key, value, receiver) {
        if(key === 'length') return true;
        console.log('update');
        return Reflect.set(target, key, value, receiver);
    }
}
let proxy = new Proxy(obj, handler);
proxy.name.name = 'zf';
```
# å“åº”å¼å˜åŒ–
- æ•°ç»„çš„å˜å¼‚æ–¹æ³•(ä¸èƒ½é€šè¿‡é•¿åº¦ï¼Œç´¢å¼•æ”¹å˜æ•°ç»„)
```js
<div id="app">
    {{hobbies}}
</div>
<script src="node_modules/vue/dist/vue.js"></script>
<script>
    let vm = new Vue({
        el: '#app',
        data: {
            hobbies: ['æ´—æ¾¡','åƒé¥­','ç¡è§‰']
        }
    });
    vm.hobbies[0] = 'å–æ°´'; // æ•°æ®å˜åŒ–è§†å›¾ä¸åˆ·æ–°
    vm.hobbies.length--; // æ•°æ®å˜åŒ–è§†å›¾ä¸ä¼šåˆ·æ–°
</script>
```
```js
vm.hobbies = ['å–æ°´']; // æ›¿æ¢çš„æ–¹å¼
vm.hobbies.push('åƒé¥­'); // push slice pop ...å˜å¼‚æ–¹æ³•
```
- ä¸èƒ½ç»™å¯¹è±¡æ–°å¢å±æ€§
```js
<div id="app">
    {{state.a}}
</div>
<script src="node_modules/vue/dist/vue.js"></script>
<script>
    let vm = new Vue({
        el: '#app',
        data: {
            state: {count: 0}
        }
    });
    // vm.state.a = 100; // æ–°å¢å±æ€§ä¸ä¼šå“åº”åˆ°è§†å›¾ä¸Š
</script>
```
- ä½¿ç”¨vm.$setæ–¹æ³•å¼ºåˆ¶æ·»åŠ å“åº”å¼æ•°æ®
```js
function $set(data, key, val) {
    if(Array.isArray(data)) {
        return data.splice(key, 1, val);
    }
    defineReactive(data, key, val);
}
$set(data.arr, 0, 1);
vm.$set(vm.state, 'a', '100');
```
# vueå®ä¾‹ä¸Šå¸¸è§å±æ€§å’Œæ–¹æ³•
- vm.$set();
```js
vm.$set(vm.state, 'a', '100');
```
- vm.$watch();
```js
vm.$watch('state.count', function(newValue, oldValue) {
    console.log(newValue, oldValue);
});
```
- vm.$mount();
```js
let vm = new Vue({
    data: {state: {count: 0}}
});
vm.$mount('#app');
```
- vm.$nextTick();
```js
vm.state.count = 100; // æ›´é«˜æ•°æ®åä¼šå°†æ›´æ”¹çš„å†…å®¹ç¼“å­˜èµ·æ¥
// åœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯tickä¸­ åˆ·æ–°é˜Ÿåˆ—
vm.$nextTick(function(){
    console.log(vm.$el.innerHTML);
});
```
- vm.$data
- vm.$el
# vueä¸­çš„æŒ‡ä»¤
åœ¨vueä¸­ï¼ŒæŒ‡ä»¤(Directives)å¼å¸¦æœ‰v-å‰ç¼€çš„ç‰¹æ®Šç‰¹æ€§ï¼Œä¸»è¦çš„åŠŸèƒ½å°±æ˜¯æ“ä½œDOM
- v-once
```js
<div v-once>{{state.count}}</div>
```
- v-html[(ä¸è¦å¯¹ç”¨æˆ·è¾“å…¥ ä½¿ç”¨v-htmlæ˜¾ç¤º)](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/innerHTML#%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98)
```js
<div v-html="text"></div>
```
- v-text
- v-if/v-elseä½¿ç”¨
v-for ä½¿ç”¨
- v-for éå†æ•°ç»„
```js
fruits: ['é¦™è•‰','è‹¹æœ','æ¡ƒå­']
<div v-for="(fruit, index) in fruits" :key="index">
    {{fruit}}
</div>
```
- v-for éå†å¯¹è±¡
```html
info:{name:'jiang',location:'å›é¾™è§‚',phone:18310349227}
<div v-for="(item, key) in info" :key="key">
    {{item}} {{key}}
</div>
```
- template çš„ä½¿ç”¨
```js
<template v-for="(item, key) in fruits">
    <p v-if="key">hello</p>
    <span v-else>world</span>
</template>
```
- keyå±æ€§çš„åº”ç”¨
```js
<div v-if="flag">
    <span>ç å³°</span>
    <input key="2" />
</div>
<div v-else>
    <span>æ¶æ„</span>
    <input key="1" />
</span>
```
- key å°½é‡ä¸è¦ä½¿ç”¨ç´¢å¼•
```js
 <ul>
    <li key="0">ğŸŒ</li>
    <li key="1">ğŸ</li>
    <li key="2">ğŸŠ</l>
  </ul>
  <ul>
    <li key="0">ğŸŠ</li>
    <li key="1">ğŸ</li>
    <li key="2">ğŸŒ</li>
  </ul>
```
# å±æ€§ç»‘å®š:(v-bind)
Class ä¸ Style ç»‘å®š
- æ•°ç»„çš„ç»‘å®š
```js
<div :class="['apple', 'banana']"></div>
<div :class="{banana: true}"></div>
```
- å¯¹è±¡ç±»å‹çš„ç»‘å®š
```js
<div :class="['apple', 'banana']"></div>
<div :class="{banana: true}"></div>
<div :style="[{background: 'red'}, {color: 'red'}]"></div>
<div :style="{color: 'red'}"></div>
```
# ç»‘å®šäº‹ä»¶ @(v-on)
- äº‹ä»¶çš„ç»‘å®š v-on ç»‘å®šäº‹ä»¶
- äº‹ä»¶ä¿®é¥°ç¬¦(.stop .prevent) .capture .self .once .passive
# vueçš„åŒå‘ç»‘å®š(v-model)
```js
<input type="text" :value="value" @input="input">
<input type="text" v-model="value">
```
- input, textarea
- select
```js
<select v-model="select">
    <option v-for="fruit in fruits" :value="fruit">
        {{fruit}}
    </option>
</select>
```
- radio
```js
<input type="radio" v-model="value" value="ç”·">
<input type="radio" v-model="value" value="å¥³">
```
- checkbox
```js
<input type="checkbox" v-model="checks" value="æ¸¸æ³³">
<input type="checkbox" v-model="checks" value="å¥èº«">
```
- ä¿®é¥°ç¬¦åº”ç”¨ .number .lazy .trim
```js
<input type="text" v-model.number="value">
<input type="text" v-model.trim="value">
```
# é¼ æ ‡ é”®ç›˜äº‹ä»¶
- æŒ‰é”®ã€é¼ æ ‡ä¿®é¥°ç¬¦ Vue.config.keyCodes
```js
Vue.config.keyCodes = {
    'f1': 112
}
```
# watch & computed
- è®¡ç®—å±æ€§å’Œwatchçš„åŒºåˆ«(å¼‚æ­¥)
```js
let vm = new Vue({
    el: '#app',
    data: {
        firstName: 'å§œ',
        lastName: 'æ–‡',
        fullName: ''
    },
    mounted() {
        this.getFullName();
    },
    methods: {
        getFullName() {
            this.fullName = this.firstName + this.lastName
        }
    },
    watch: {
        firstName() {
            setTimeout(() => {
                this.getFullName();
            }, 1000)
        },
        lastName() {
            this.getFullName();
        }
    }
    // è®¡ç®—å±æ€§ä¸æ”¯æŒå¼‚æ­¥
    // computed: {
    //     fullName() {
    //         return this.firstName + this.lastName;
    //     }
    // }
});
```
- è®¡ç®—å±æ€§å’Œ method çš„åŒºåˆ«(ç¼“å­˜)
# æ¡ä»¶æ¸²æŸ“
- v-ifå’Œv-showåŒºåˆ«
- v-if/v-else-if/v-else
- v-show
# è¿‡æ»¤å™¨çš„åº”ç”¨(è¿‡æ»¤å™¨ä¸­çš„thiséƒ½æ˜¯window)
- å…¨å±€è¿‡æ»¤å™¨å’Œå±€éƒ¨è¿‡æ»¤å™¨
- ç¼–å†™ä¸€ä¸ªè¿‡æ»¤å™¨
```js
<div>{{'hello' | capitalize(2)}}</div>
Vue.filter('capitalize', (value, count=1) => {
    return value.slice(0, count).toUpperCase() + value.slice(count);
});
```
# æŒ‡ä»¤çš„ç¼–å†™
- å…¨å±€æŒ‡ä»¤å’Œå±€éƒ¨æŒ‡ä»¤
- ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤
    - é’©å­å‡½æ•° bind, inserted, update
```js
<input type="text" v-focus.color="'red'">
Vue.directive('focus', {
    inserted: (el, bindings) => {
        let color = bindings.modifiers.color;
        if(color) {
            console.log('color');
            el.style.boxShadow = `1px 1px 2px ${bindings.value}`
        }
        el.focus();
    }
});
```
- clickoutsideæŒ‡ä»¤
```js
<div v-click-outside="change">
    <input type="text" @focus="flag=true">
    <div v-show="flag">
        contenter
    </div>
</div>
let vm = new Vue({
    el: "#app",
    data: {
        flag: false
    },
    methods: {
        change() {
            this.flag = false;
        }
    },
    directives: {
        'click-outside'(el, bindings, vnode) {
            document.addEventListener('click', (e) => {
                if(!el.contains(e.target, vnode)) {
                    let eventName = bindings.expression;
                    vnode.context[eventName]()
                }
            })
        }
    }
})
```
# vueä¸­çš„ç”Ÿå‘½å‘¨æœŸ
- beforeCreate åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®è§‚æµ‹(data observer)å’Œevent/watcher äº‹ä»¶é…ç½®ä¹‹å‰è¢«è°ƒç”¨ã€‚
- created å®ä¾‹å·²ç»åˆ›å»ºå®Œæˆä¹‹åè¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šæ•°æ®è§‚æµ‹ï¼ˆdata observerï¼‰,å±æ€§å’Œæ–¹æ³•çš„è¿ç®—ï¼Œwatch/eventäº‹ä»¶å›è°ƒã€‚è¿™é‡Œæ²¡æœ‰$el
- beforeMount åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼šç›¸å…³çš„renderå‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ã€‚
- mounted el è¢«æ–°åˆ›å»ºçš„vm.$elæ›¿æ¢ï¼Œå¹¶æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»ä¹‹åè°ƒç”¨è¯¥é’©å­ã€‚
- beforeUpdate æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹å‰ã€‚
- updated ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ï¼Œåœ¨è¿™ä¹‹åä¼šè°ƒç”¨è¯¥é’©å­ã€‚
- beforeDestroy å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ã€‚
- destroyed Vue å®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è°ƒç”¨åï¼ŒVueå®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚

# é’©å­å‡½æ•°ä¸­è¯¥åšçš„äº‹æƒ…
- created å®ä¾‹å·²ç»åˆ›å»ºå®Œæˆï¼Œå› ä¸ºå®ƒæ˜¯æœ€æ—©è§¦å‘çš„åŸå› å¯ä»¥è¿›è¡Œä¸€äº›æ•°æ®ï¼Œèµ„æºçš„è¯·æ±‚ã€‚
- mounted å®ä¾‹å·²ç»æŒ‚è½½å®Œæˆï¼Œå¯ä»¥è¿›è¡Œä¸€äº›DOMæ“ä½œ
- beforeUpdate å¯ä»¥åœ¨è¿™ä¸ªé’©å­ä¸­è¿›ä¸€æ­¥åœ°æ›´æ”¹çŠ¶æ€ï¼Œè¿™ä¸ä¼šè§¦å‘é™„åŠ çš„é‡æ¸²æŸ“è¿‡ç¨‹ã€‚
- updated å¯ä»¥æ‰§è¡Œä¾èµ–äºDOMçš„æ“ä½œã€‚ç„¶è€Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹çŠ¶æ€ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¯¼è‡´æ›´æ–°æ— é™å¾ªç¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚
- destroyed å¯ä»¥æ‰§è¡Œä¸€äº›ä¼˜åŒ–æ“ä½œï¼Œæ¸…ç©ºå®šæ—¶å™¨ï¼Œè§£é™¤ç»‘å®šäº‹ä»¶ã€‚

# vueä¸­çš„åŠ¨ç”»
vueä¸­çš„åŠ¨ç”»å°±æ˜¯ä»æ— åˆ°æœ‰æˆ–è€…ä»æœ‰åˆ°æ— äº§ç”Ÿçš„ã€‚æœ‰ä»¥ä¸‹å‡ ä¸ªçŠ¶æ€transitionç»„ä»¶çš„åº”ç”¨
```css
.v-enter-active, .v-leave-active {
    transition: opacity 0.25s ease-out;
}
.v-enter, .v-leave-to {
    opacity: 0;
}
```
åˆ‡æ¢isShowçš„æ˜¾ç¤ºæˆ–è€…éšè—å°±æ˜¾ç¤ºå‡ºæ•ˆæœå•¦~
```html
<button @click="toggle">toggle</button>
<transition>
    <span v-show="isShow">ç å³°æ¶æ„</span>
</transition>
```
> é»˜è®¤çš„nameæ˜¯ä»¥ v- å¼€å¤´ï¼Œå½“ç„¶ä½ å¯ä»¥è‡ªå·±æŒ‡å®šnameå±æ€§æ¥ä¿®æ”¹å‰ç¼€

# ä½¿ç”¨animate.css è®¾ç½®åŠ¨ç”»
```css
.v-enter-active {
    animation: zoomIn 2s linear
}
.v-leave-active {
    animation: zoomOut 2s linear
}
```
ç›´æ¥ä¿®æ”¹æ¿€æ´»æ—¶çš„æ ·å¼
```js
<transition 
    enter-active-class="zoomIn"
    leave-active-class="zoomOut">
    <span class="animated" v-show="isShow">ç å³°æ¶æ„</span>
</transition>
```
vueä¸­çš„jsåŠ¨ç”»
```js
<transition 
    @before-enter="beforeEnter"
    @enter="enter"
    @after-enter="afterEnter">
    <span class="animated" v-show="isShow">ç å³°æ¶æ„</span>
</transition>
```
å¯¹åº”çš„é’©å­æœ‰before-leave, leave, after-leave é’©å­å‡½æ•°ï¼Œå‡½æ•°çš„å‚æ•°ä¸ºå½“å‰å…ƒç´ 
```js
beforeEnter(el) {
    el.style.color = "red"
},
enter(el, done) {
    setTimeout(() => {
        el.style.color = "green"
    }, 1000);
    setTimeout(() => {
        done();
    }, 2000);
}
afterEnter(el) {
    el.style.color = "blue";
}
```
# ä½¿ç”¨jsåŠ¨ç”»åº“
> https://github.com/julianshapiro/velocity
```js
<script src="node_modules/velocity-animate/velocity.js"></script>
beforeEnter(el) {
    el.style.opacity = 0;
},
enter(el, done) {
    Velocity(el, {opacity: 1}, {duration: 2000, complete: done})
},
afterEnter(el) {
    el.style.color = "blue";
},
leave(el, done) {
    Velocity(el, {opacity: 0}, {duration: 2000, complete: done})
}
```
# ç­›é€‰åŠ¨ç”»
```js
<div id="app">
    <input type="text" v-model="filterData">
    <transition-group 
        enter-active-class="zoomInLeft"
        leave-active-class="zoomOutRight">
        <div v-for="(l, index) in computedData" :key="l.title" class="animated">
            {{l.title}}
        </div>
    </transition-group>
</div>
<script src="./node_modules/vue/dist/vue.js"></script>
<script>
    let vm = new Vue({
        el: "#app",
        data: {
            filterData: "",
            dataList: [
                {title: "æ ‡é¢˜1"},
                {title: "æ ‡é¢˜2"},
                {title: "æ ‡é¢˜4"},
                {title: "æ ‡é¢˜3"}
            ]
        },
        computed: {
            computedData() {
                return this.dataList.filter(item => {
                    return item.title.includes(this.filterData);
                })
            }
        }
    })
</script>
```